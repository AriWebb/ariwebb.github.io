<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Butterfly Distance - Ari Webb</title>
<meta name="description" content="Introduction">


  <meta name="author" content="Ari Webb">
  
  <meta property="article:author" content="Ari Webb">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Ari Webb">
<meta property="og:title" content="Butterfly Distance">
<meta property="og:url" content="http://localhost:4000/projects/butterfly_distance/">


  <meta property="og:description" content="Introduction">



  <meta property="og:image" content="http://localhost:4000/assets/images/butterfly_distance/butterfly_image.png">





  <meta property="article:published_time" content="2023-09-11T00:00:00-07:00">



  <meta property="article:modified_time" content="2023-09-11T00:00:00-07:00">




<link rel="canonical" href="http://localhost:4000/projects/butterfly_distance/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Ari Webb
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/">Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/stocks/">Stocks</a>
            </li><li class="masthead__menu-item">
              <a href="/books/">Books</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
        <img src="/assets/images/butterfly_distance/butterfly_image.png"
             alt="">
      
      <h3>Role</h3>
      <p>Frontend Engineer, Backend Engineer, Design</p>

      
    
      
      <h3>Languages/Frameworks</h3>
      <p>TypeScript, HTML, CSS, Svelte, Cloudflare Pages &amp; Workers</p>

      
    
      
      <h3>Built For</h3>
      <p>Personal Project</p>

      
    
      
      
      <p>Time Spent: 40 hours, Lines: ~2000.</p>

      
    
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Butterfly Distance">
    <meta itemprop="description" content="Introduction">
    <meta itemprop="datePublished" content="2023-09-11T00:00:00-07:00">
    <meta itemprop="dateModified" content="2023-09-11T00:00:00-07:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Butterfly Distance
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-09-11T00:00:00-07:00">September 11, 2023</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#introduction">Introduction</a><ul><li><a href="#homepage">Homepage</a></li><li><a href="#timers">Timers</a></li><li><a href="#photos">Photos</a></li></ul></li><li><a href="#technical-overview">Technical Overview</a></li><li><a href="#lessons-learned">Lessons Learned</a><ul><li><a href="#rendering-large-images-in-webpages-takes-a-long-time">Rendering large images in webpages takes a long time.</a></li><li><a href="#api-design-is-crucial">API Design Is Crucial</a></li></ul></li><li><a href="#further-development">Further Development</a></li></ul>

            </nav>
          </aside>
        
        <h1 id="introduction">Introduction</h1>

<p>Introducing Butterfly: the one stop shop for keeping up with your long distance partner!</p>

<p>I’ve been in a long distance relationship for a few years now. A few months ago, my girlfriend and I looked into using an app to help us feel closer to each other. The main feature we were looking for then was a countdown timer. The app we found, though, did not have a good UI and had many ads –yuck.</p>

<p>So, I decided to build my own version of this application, along with some more features. The core functionalities of my web app –called Butterfly– are as follows:</p>

<h2 id="homepage">Homepage</h2>

<p>The homepage has three features. First, it has a daily love quote. Second, it displays the soonest countdown timer, so partners can know when they will see each other next. Lastly, it picks a few random photos from the photo album and shows them in a masonry layout (photos omitted for privacy).</p>

<p><img src="http://localhost:4000/assets/images/butterfly_distance/homepage.png" alt="" /></p>

<h2 id="timers">Timers</h2>

<p>The Timers page allows for either partner to see and delete their current timers alongside create new countdown timers. Each timer has an icon, which is an emoji that can be picked from the custom dropdown I made (with inspiration from <a href="https://svelte.dev/repl/c28366e7572444bd83f5cb265f941d42?version=3.31.0">this</a>), a name and a date sometime in the future.</p>

<p align="center">
<img src="http://localhost:4000/assets/images/butterfly_distance/timer.png" alt="" width="200" height="250" />
</p>

<h2 id="photos">Photos</h2>

<p>Lastly, the photo album is a paginated grid of all photos uploaded by either partner. When a user hovers over a photo, they have the option to delete that photo. Also, at the foot of the page, there is a drag and drop place to upload new photos.</p>

<h1 id="technical-overview">Technical Overview</h1>

<p>I recently read a <a href="https://joshcollinsworth.com/blog/antiquated-react">blog post</a> by Josh Collinsworth outlining the limitations of React. This post inspired me to consider alternatives for my application. I eventually landed on <a href="https://kit.svelte.dev/docs/introduction">SvelteKit</a>, a framework that uses Svelte.</p>

<p>Svelte’s main value proposition over React, in my opinion, is the simplicity. The key insight behind Svelte is that Web Development is essentially just three things, JavaScript (or TypeScript if you come from a background of strictly typed languages like me), HTML and CSS. Further, these elements do not need to be generated by the browser in real time. Instead, these elements can be woven together at compile time.</p>

<p>The realization of this insight leads to being able to develop more simple and elegant applications faster.</p>

<p>SvelteKit offers a few more convenient features on top of Svelte such as Routing and Server Side Rendering (SSR).</p>

<p>As for hosting and backend services, I used Cloudflare Pages and Workers upon recommendation by <a href="https://mann.xyz/#/projects">Luke Mann</a>. For data storage, I used Cloudflare R2 blob storage. Because my application is not very big, these services are all free!</p>

<p>For authentication, I used Google Auth, which was actually a little more sitcky to set up than I was expecting. <a href="https://medium.com/@uriser/authentication-in-sveltekit-with-auth-js-7ff505d584c4">This</a> blog post came to the rescue.</p>

<p>For frontend tooling, I used an Open Source toolkit called <a href="https://www.skeleton.dev/">Skeleton</a>, alongside Tailwind. The skeleton components look good and were really easy to set up. Tailwind came in clutch for a few niche cases including the masonry layout for the photos.</p>

<h1 id="lessons-learned">Lessons Learned</h1>

<p>Here are some lessons I learned:</p>

<h2 id="rendering-large-images-in-webpages-takes-a-long-time">Rendering large images in webpages takes a long time.</h2>

<p>In hindsight, this seems pretty obvious, but in the moment it was relatively frustrating. I kept having really long load times and occasional internal errors being thrown from my Cloudflare worker. At first, I thought that if I made concurrent requests to the worker, this might speed things up. So I implemented six concurrent requests to the bucket at a time (the max based on the <a href="https://developers.cloudflare.com/workers/platform/limits#simultaneous-open-connections">spec</a>), but this did little to solve the problem. I then realized that really the problem was that my images were too large. Luckily, this <a href="https://www.npmjs.com/package/browser-image-compression">browser image compressing module</a> came to the rescue. After some brief experimentation, I figured out that I could compress the photos from 1-3MB all the way down to a ~50KB with relatively little loss in quality. Problem solved.</p>

<h2 id="api-design-is-crucial">API Design Is Crucial</h2>

<p>I dedicated a significant portion of this project to API design and implementation. Upon reflection, I realized that my code became somewhat more complex than necessary. This complexity arose from the initial oversight of not investing sufficient time in defining the structure of my APIs. As previously mentioned, a critical concern was efficiently delivering photos to the browser. I frequently encountered the challenge of finding the right balance between providing enough photos to make the application engaging and preventing excessive demands that could overwhelm the server or result in performance issues. To address this, I incorporated data pagination as a crucial component of my API design, allowing me to strike that balance effectively.</p>

<h1 id="further-development">Further Development</h1>

<p>I am very happy with how this website came out. Overall DX including deployment and observability were made super easy (and free!) with Cloudflare. SvelteKit was for the most part a breeze to work with.</p>

<p>For further features, I am considering using my Cloudflare worker to email notifications when countdown timers reach certain times. And, if I have more time, maybe implementing a fun “letter-sending” chat feature.</p>

<p>Thanks for reading. If you have any questions about this project, feel free to reach out!</p>

<p>Ari</p>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2023-09-11">September 11, 2023</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/projects/case_shiller/" class="pagination--pager" title="Case Shiller Prediction
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://www.instagram.com/ari.webb/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
        
      
        
          <li><a href="https://github.com/AriWebb" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/ari-webb/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin-in" aria-hidden="true"></i> Linkedin</a></li>
        
      
    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Ari Webb. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
